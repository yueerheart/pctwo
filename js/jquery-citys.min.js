/*==================================
 * by:Yangyunhe——David Yang
 * 2017-7-7
 * http:www.yangyunhe.me
 * 省市区三级联动菜单插件-含最新官方数据库数据
 *==================================*/
+function(a){a.fn.citys=function(b){function u(a){var d,e,f,g,b=a.toString().substr(0,2),c=new RegExp(b+"0100");p=0;for(d in h)c.test(d)&&(p=1);if(0==p){s.hide(),n=o,e=new RegExp(b+"\\d{4}"),f="",g=[],f="<option>-请选择-</option>";for(d in h)e.test(d)&&d!=b+"0000"&&(g[d]=h[d]);f+=w(g),r.html(f)}else if(1==p){s.show(),e=new RegExp(b+"\\d{2}00"),f="",g=[],f="<option>-请选择-</option>";for(d in h)e.test(d)&&d!=b+"0000"&&(g[d]=h[d]);f+=w(g),r.html(f)}v(a)}function v(a){var f,b=a.toString().substr(0,4),c=new RegExp(b+"\\d{2}"),d="",e=[];if(d="<option>-请选择-</option>",1==p){for(f in h)c.test(f)&&f!=b+"00"&&(e[f]=h[f]);d+=w(e)}else d="";s.html(d)}function w(a){var d,b=a,c="";for(d in b)c+="<option value='"+("code"==k?d:h[d])+"' data-code='"+d+"'>"+h[d]+"</option>";return c}var t,c=a.extend({url:"js/jquery-citys.json",patternPro:/\d{2}0000/,patternCity:/1101\d{2}/,type:"code",code:0,province:"",city:"",area:"",selState:0,selProvince:"province",selCity:"city",selArea:"area"},b),d="",e="",g=a(this),h="",i=c.patternPro,k=(c.patternCity,c.type),l=c.code,m=c.province,n=c.city,o=c.area,p=c.selState,q=g.find('select[name="'+c.selProvince+'"]'),r=g.find('select[name="'+c.selCity+'"]'),s=g.find('select[name="'+c.selArea+'"]');a.getJSON(c.url,function(a){h=a,t()}),t=function(){var b,c;d="<option> - 请选择 - </option>",e="<option> - 请选择 - </option>";for(b in h)i.test(b)&&(d+="<option value='"+("code"==k?b:h[b])+"' data-code='"+b+"'>"+h[b]+"</option>");q.html(d),r.html(e),s.hide(),"code"==k&&l&&(c=l-l%1e4,m=c,c=l-(l%1e4?l%100:l),n=c,c=l%100?l:0,o=c),q.find("option").each(function(){"code"==k&&""!=m?m==a(this).data("code")&&(a(this).attr("selected",!0),u(a(this).data("code"))):"name"==k&&""!=m&&m==a(this).val()&&(a(this).attr("selected",!0),u(a(this).data("code")))}),r.find("option").each(function(){"code"==k&&""!=n?n==a(this).data("code")&&(a(this).attr("selected",!0),v(a(this).data("code"))):"name"==k&&""!=n&&n==a(this).val()&&(a(this).attr("selected",!0),v(a(this).data("code")))}),s.find("option").each(function(){1==p&&("code"==k&&""!=o?o==a(this).data("code")&&a(this).attr("selected",!0):"name"==k&&""!=o&&o==a(this).val()&&a(this).attr("selected",!0))})},q.on("change",function(){var b=a(this).find("option:selected").data("code")||a(this).find("option").eq(0).data("code");u(b)}),r.on("change",function(){var b=a(this).find("option:selected").data("code")||a(this).find("option").eq(0).data("code");v(b)})}}(jQuery);